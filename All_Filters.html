<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advanced DSP Visualizer</title>
<style>
    @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&display=swap');

    body {
        font-family: 'Roboto', sans-serif;
        background-color: #f4f6f9;
        color: #1f2937;
        text-align: center;
        padding: 30px;
        margin: 0;
    }

    .container {
        background: white;
        padding: 40px;
        border-radius: 16px;
        max-width: 800px;
        margin: auto;
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.08);
        border: 1px solid #e5e7eb;
    }

    h1 {
        font-weight: 700;
        color: #111827;
        letter-spacing: 0.5px;
        margin-top: 0;
    }

    p.subtitle {
        color: #6b7280;
        font-size: 16px;
        margin-bottom: 30px;
    }

    /* Buttons */
    .button-group {
        display: flex;
        justify-content: center;
        gap: 12px;
        flex-wrap: wrap;
        margin-bottom: 30px;
    }

    .filter-btn {
        background: #f3f4f6;
        color: #111827;
        font-size: 15px;
        font-weight: 600;
        padding: 10px 18px;
        border: 1px solid #d1d5db;
        border-radius: 8px;
        cursor: pointer;
        transition: all 0.2s ease;
    }

    .filter-btn:hover {
        background: #e5e7eb;
    }

    .filter-btn.active {
        background: #2563eb;
        color: white;
        border-color: #1d4ed8;
        box-shadow: 0 4px 12px rgba(37, 99, 235, 0.3);
    }

    /* Slider */
    .slider-container {
        background: #f9fafb;
        padding: 20px;
        border-radius: 12px;
        margin-bottom: 40px;
        border: 1px solid #e5e7eb;
    }

    .slider-label {
        font-size: 16px;
        font-weight: 600;
        margin-bottom: 10px;
        display: block;
    }

    .slider-value {
        color: #2563eb;
        font-weight: bold;
    }

    input[type=range] {
        width: 100%;
        appearance: none;
        background: transparent;
    }

    input[type=range]::-webkit-slider-runnable-track {
        height: 6px;
        background: #d1d5db;
        border-radius: 6px;
    }

    input[type=range]::-webkit-slider-thumb {
        appearance: none;
        height: 20px;
        width: 20px;
        border-radius: 50%;
        background: #2563eb;
        cursor: pointer;
        margin-top: -7px;
        box-shadow: 0 3px 8px rgba(0, 0, 0, 0.2);
    }

    /* Graph */
    .graph-wrapper {
        background: #ffffff;
        padding: 30px 20px 0 20px;
        border-radius: 14px;
        border: 1px solid #e5e7eb;
        box-shadow: inset 0 0 10px rgba(0,0,0,0.03);
    }

    .graph {
        display: flex;
        justify-content: space-around;
        align-items: flex-end;
        height: 250px;
    }

    .subject {
        display: flex;
        flex-direction: column;
        justify-content: flex-end;
        align-items: center;
        width: 25%;
        height: 100%;
    }

    .bar-container {
        width: 100%;
        height: 100%;
        display: flex;
        align-items: flex-end;
        background: #f3f4f6;
        border-radius: 8px;
        border: 1px solid #e5e7eb;
    }

    .bar {
        width: 100%;
        border-radius: 8px 8px 0 0;
        transition: height 0.05s linear;
    }

    .low-bar { background: #f97316; }
    .mid-bar { background: #16a34a; }
    .high-bar { background: #7c3aed; }

    /* Labels */
    .labels-row {
        display: flex;
        justify-content: space-around;
        margin-top: 15px;
        padding-bottom: 20px;
    }

    .label-box {
        width: 25%;
        text-align: center;
    }

    .emoji {
        font-size: 40px;
        margin-bottom: 6px;
    }

    .label-text {
        font-size: 15px;
        font-weight: 600;
    }

    .label-sub {
        font-size: 13px;
        color: #6b7280;
    }

</style>
</head>
<body>

<div class="container">
    <h1>DSP Filter Studio</h1>
    <p class="subtitle">Select a filter type and drag the frequency slider to see how it shapes the sound.</p>

    <div class="button-group">
        <button class="filter-btn active" onclick="setFilter('none', this)">Bypass (No Filter)</button>
        <button class="filter-btn" onclick="setFilter('lowpass', this)">Low-Pass</button>
        <button class="filter-btn" onclick="setFilter('highpass', this)">High-Pass</button>
        <button class="filter-btn" onclick="setFilter('bandpass', this)">Band-Pass</button>
        <button class="filter-btn" onclick="setFilter('notch', this)">Band-Stop (Notch)</button>
    </div>

    <div class="slider-container">
        <label class="slider-label">
            Cutoff / Center Frequency: <span class="slider-value" id="freqDisplay">All Sounds Passing</span>
        </label>
        <input type="range" id="freqSlider" min="0" max="100" value="50">
    </div>

    <div class="graph-wrapper">
        <div class="graph">
            <div class="subject">
                <div class="bar-container">
                    <div class="bar low-bar" id="barHum" style="height: 100%;"></div>
                </div>
            </div>
            <div class="subject">
                <div class="bar-container">
                    <div class="bar mid-bar" id="barMan" style="height: 100%;"></div>
                </div>
            </div>
            <div class="subject">
                <div class="bar-container">
                    <div class="bar high-bar" id="barBird" style="height: 100%;"></div>
                </div>
            </div>
        </div>
        
        <div class="labels-row">
            <div class="label-box">
                <div class="emoji">üè≠</div>
                <div class="label-text">Factory Hum<br><span class="label-sub">Low Frequency</span></div>
            </div>
            <div class="label-box">
                <div class="emoji">üë®</div>
                <div class="label-text">Man Speaking<br><span class="label-sub">Mid Frequency</span></div>
            </div>
            <div class="label-box">
                <div class="emoji">üê¶</div>
                <div class="label-text">Bird Chirping<br><span class="label-sub">High Frequency</span></div>
            </div>
        </div>
    </div>
</div>

<script>
    // Variables
    let currentFilter = 'none';
    const slider = document.getElementById('freqSlider');
    const freqDisplay = document.getElementById('freqDisplay');
    
    // The bars
    const barHum = document.getElementById('barHum');
    const barMan = document.getElementById('barMan');
    const barBird = document.getElementById('barBird');

    // We imagine the 3 sounds live at these spots on our 0-100 slider
    const posHum = 15;
    const posMan = 50;
    const posBird = 85;

    // Handle Button Clicks
    function setFilter(type, btnElement) {
        currentFilter = type;
        
        // Update button styles
        document.querySelectorAll('.filter-btn').forEach(btn => btn.classList.remove('active'));
        btnElement.classList.add('active');

        updateGraph();
    }

    // Handle Slider Dragging
    slider.addEventListener('input', updateGraph);

    // The Math Engine that calculates bar heights visually
    function updateGraph() {
        let val = parseInt(slider.value);

        // Update Slider Text
        if (currentFilter === 'none') {
            freqDisplay.innerText = "All Sounds Passing";
            freqDisplay.style.color = "#94a3b8";
        } else {
            // Fake frequency numbers just to look cool (20Hz to 20,000Hz approx)
            let fakeHz = Math.floor(20 + (val * 199.8)); 
            freqDisplay.innerText = fakeHz + " Hz";
            freqDisplay.style.color = "#38bdf8";
        }

        // Calculate heights (5% minimum so the bar never entirely vanishes, 100% max)
        barHum.style.height = calculateGain(posHum, val, currentFilter) + "%";
        barMan.style.height = calculateGain(posMan, val, currentFilter) + "%";
        barBird.style.height = calculateGain(posBird, val, currentFilter) + "%";
    }

    // Logic for how the filter shapes the bars based on distance from the slider
    function calculateGain(subjectPos, sliderPos, type) {
        if (type === 'none') return 100;

        let distance = subjectPos - sliderPos;
        let gain = 100;
        let steepness = 3.5; // Controls how sharp the cutoff cliff is

        switch (type) {
            case 'lowpass':
                // High if subject is to the LEFT of slider
                gain = 100 - (distance * steepness);
                break;
            case 'highpass':
                // High if subject is to the RIGHT of slider
                gain = 100 + (distance * steepness);
                break;
            case 'bandpass':
                // High if subject is VERY CLOSE to slider
                gain = 100 - (Math.abs(distance) * 4);
                break;
            case 'notch':
                // Low if subject is VERY CLOSE to slider
                gain = Math.abs(distance) * 4;
                break;
        }

        // Keep it between 4% (just a sliver) and 100%
        return Math.max(4, Math.min(100, gain));
    }
</script>

</body>
</html>
